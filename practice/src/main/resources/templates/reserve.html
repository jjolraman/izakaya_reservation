<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserve</title>
    
    <!-- Bootstrap CSS: 최신 버전만 사용합니다. -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  
  

    <!-- Bootstrap Datepicker CSS -->
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">
    
    <!-- 사용자 정의 CSS 파일 -->
       <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/reserve.css">

    <!-- jQuery: Bootstrap의 의존성 -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Bootstrap JS: 최신 버전을 사용 -->
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Bootstrap Datepicker JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
   
   
    
    <!-- 사용자 정의 JavaScript 파일 -->
    <script src="/js/script.js" defer></script>
    
    
    
	<script th:inline="javascript">
    /*<![CDATA[*/
     var reserves = [[${reserve}]]; // 서버로부터 받은 예약 데이터
    console.log(reserves);

    // 페이지가 완전히 로드되었을 때 실행
    document.addEventListener('DOMContentLoaded', function() {
        // 예약 배열 순회
        reserves.forEach(function(res) {
            // 해당 시간에 해당하는 모든 요소를 찾아서 'disabled' 클래스 추가
            document.querySelectorAll('.time-slot[data-time="' + res.time + '"]').forEach(function(el) {
                el.classList.add('disabled');
            });
        });
    });
    /*]]>*/
</script>

    
</head>
<body>
	<header>
	<h1 id="logo"><a href="index.html"><img src="images/logo.png" alt="居酒屋"></a></h1>
	<!--PC用（901px以上端末）メニュー-->
	<nav id="menubar">
		<ul>
		<li><a href="/">ホーム</a></li>
		<li class="current"><a href="about">お店情報</a></li>
		<li><a href="menu">メニュー</a></li>
		<li><a href="reserve">ご予約</a></li>
		<li><a href="contact">お問合せ</a></li>
		<li><a th:unless="${session.loginUser}" href="javascript:void(0)" onclick="openPopup('login')" class="popup-btn">ログイン</a></li>
		<li><a th:if="${session.loginUser}" href="logout" class="popup-btn">ログアウト</a></li></li>
		</ul>
</nav>
	</header>


    <div class="container-fluid px-0 px-sm-1 mx-auto mt-5">
    <div class="row justify-content-center mx-1">
        <div class="col-lg-10">
        <div class="card border-0">
            <form id="reserve" action="reserve" autocomplete="off" method="post">
            
            <div class="container-fluid card-header bg-dark">
                <div class="d-flex justify-content-center">
                    <input name="date" type="text" id="dp1" class="datepicker" th:value="${date}" placeholder="날짜를 정해주세요." readonly><span class="fa fa-calendar"></span>

                    <select name="person" class="form-select ml-3">
                        <option selected>人員</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                    
                    <select name="menu" class="form-select ml-3">
                        <option selected>メニュー</option>
                        <option value="set1">set1</option>
                        <option value="set2">set2</option>
                        <option value="set3">set3</option>
                    </select>
                </div>
            </div>
           <div class="card-body p-4 p-sm-4 ml-4"><h3>午前</h3>
                    <div class="row text-center mx-0">
                        <input type="hidden" name="time" id="selectedTime" value="">
                        <div class="col-md-2 col-4 my-3 px-0"><div class="cell py-2 time-slot" data-time="10:00AM">10:00AM</div></div>
                        <div class="col-md-2 col-4 my-3 px-0"><div class="cell py-2 time-slot" data-time="11:00AM">11:00AM</div></div>
                        <div class="col-md-2 col-4 my-3 px-0"><div class="cell py-2 time-slot" data-time="12:00PM">12:00PM</div></div>
                    </div>
                </div>
           <div class="card-body p-4 p-sm-4 ml-4"><h3>午後</h3>
                    <div class="row text-center mx-0">
                        <div class="col-md-2 col-4 my-3 px-0"><div class="cell py-2 time-slot" data-time="1:00PM">1:00PM</div></div>
                        <div class="col-md-2 col-4 my-3 px-0"><div class="cell py-2 time-slot" data-time="2:00PM">2:00PM</div></div>
                        <div class="col-md-2 col-4 my-3 px-0"><div class="cell py-2 time-slot" data-time="3:00PM">3:00PM</div></div>
                        <div class="col-md-5 col-4 my-3 px-0"><div class="cell py-2 time-slot" data-time="4:00PM">4:00PM</div></div>
                        <div class="col-4 col-md-2 my-3 px-0"><div class="cell py-2 time-slot" data-time="6:00PM">6:00PM</div></div>
                        <div class="col-4 col-md-2 my-3 px-0"><div class="cell py-2 time-slot" data-time="7:00PM">7:00PM</div></div>
                        <div class="col-4 col-md-2 my-3 px-0"><div class="cell py-2 time-slot" data-time="8:00PM">8:00PM</div></div>
                        <div class="col-4 col-md-2 my-3 px-0"><div class="cell py-2 time-slot" data-time="9:00PM">9:00PM</div></div>
                    </div>
                </div>
	         	<div id="loginModal" class="modal">
				 <div class="modal-content">
				   <span class="close">&times;</span>
				   <h2>情報を入力してください。</h2>
				     <div class="form-group">
				       <label for="name">メール</label>
				       <input type="text" id="name" name="email">
				     </div>
				     <button onclick="submitForms()">予約する</button>
				 </div>
				</div>   
				</div>         
            </form>
        </div>
        <div id="bt">
            <button th:if="${session.loginUser}" type="submit" form="reserve">予約する</button>
            <button th:unless="${session.loginUser}" id="loginPrompt" onclick="showLoginModal()">予約する</button>
            <button onclick="location.href='/'">帰る</button>
        </div>
        </div>
    </div>
   
    <!-- 비회원 정보입력 팝업창 -->
<!--   <div id="loginModal" class="modal">
		 <div class="modal-content">
		   <span class="close">&times;</span>
		   <h2>情報を入力してください。</h2>
		   <form action="/join" method="post" id="loginForm">
		     <div class="form-group">
		       <label for="name">メール</label>
		       <input type="text" id="name" name="email" required>
		     </div>
		     <div class="form-group">
		       <label for="tel">電話番号</label>
		       <input type="tel" id="tel" name="tel" required>
		     </div>
		     <button type="submit" onclick="submitForms()">予約する</button>
		   </form>
		 </div>
	</div>
	-->
</body>

</html>